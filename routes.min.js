function getParmsFromURLHash(){var r=location.href,a=r.lastIndexOf("#");if(-1!==a){for(r=(r=r.slice(a+1)).replace(/([^:])(\/+)/g,"$1/");"/"==r.charAt(0);)r=r.substr(1);for(;"/"==r.charAt(r.length-1);)r=r.substr(0,r.length-1);var t=(r=r.split("?")[0]).split("/");for(var e in t)t[e]&&!isNaN(t[e])&&(t[e]=parseFloat(t[e]));return{url:r,params:t}}return!1}function Routes(r){window.onload=function(){initializeRouter(r)},window.onhashchange=function(){initializeRouter(r)}}function initializeRouter(r){var a=getParmsFromURLHash();if(params=a.params,!params)return r.default&&(default_path="#"+("/"!=r.default.charAt(0)?"/":"")+r.default,window.location.hash=default_path,e.preventDefault()),!1;var t=a.url;""===t&&(t="/"),r.default&&delete r.default;var i=Object.keys(r);for(var n in i)if(i[n].length>1&&"/"===i[n].charAt(0)){var l=i[n].substr(1);r[l]=r[i[n]],delete r[i[n]],i[n]=l}if(-1!=i.indexOf(t)&&"function"==typeof r[t])return UrlParams={},UrlParams.fullUrl=t,r[t](),!1;var s=[];for(var n in i)if((u=i[n]).indexOf("/:")>=0){var o={};o.original=u,o.reg_exp=u.replace(/:([^/]+)/gi,"([^/]+)"),s.push(o)}for(var f in s){var u=s[f];if(t.match(new RegExp(u.reg_exp,"gi"))&&t.split("/").length===u.original.split("/").length&&"function"==typeof r[u.original]){(UrlParams={}).fullUrl=t,url_parts=t.split("/"),pattern_parts=u.original.split("/");for(var p in pattern_parts)":"===pattern_parts[p].charAt(0)&&(UrlParams[pattern_parts[p].substr(1)]=url_parts[p]);return r[u.original](),!1}}return window.location.hash=default_path,e.preventDefault(),!1}var default_path="/",UrlParams={};
